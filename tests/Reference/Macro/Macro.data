// define constants
#define IMPR_PERIOD 1.

// dimension
dimension 2

// create the domain using the include macro
Domaine dom

// create the mesh in an external file
#include Macro.geo

VDF discretization 

# Time scheme explicit or implicit #
Scheme_euler_explicit time_scheme
Read time_scheme {
    tinit 0
    tmax 5.0

    dt_min 5.e-3
    dt_max 5.e-3

    dt_impr IMPR_PERIOD 
}

# Problem definition #
Pb_hydraulique problem

# Association between the different objects #
Associate  problem dom 
Associate  problem time_scheme 
Discretize problem discretization 

# Problem description #
Read problem {

	# Physical characteristcs of medium #
    fluide_incompressible {
        # hydraulic problem #
        # Dynamic viscosity [kg/m/s] #
        mu Champ_Uniforme 1 3.7e-05
        # Volumic mass [kg/m3] #
        rho Champ_Uniforme 1 2
    }


	# hydraulic problem #
    Navier_Stokes_standard
    {
        # Pressure matrix solved with #
        solveur_pression GCP {
            precond ssor { omega 1.500000 }
            seuil 1.000000e-06
            impr
        }

        # Two operators are defined #
        convection { quick }
        diffusion { }

        # Uniform initial condition for velocity #
        initial_conditions {
            vitesse Champ_Uniforme 2 0. 0.
        }

        # Boundary conditions #
        boundary_conditions {
            Left   paroi_fixe
            Right  paroi_fixe
            Bottom frontiere_ouverte_vitesse_imposee Champ_front_Uniforme 2 0. 1.
            Top    frontiere_ouverte_pression_imposee Champ_front_Uniforme 1 0.
        }
    }

    Post_processing
    {
        format lml
        fields dt_post IMPR_PERIOD
        {
            pression elem
            pression som
            vitesse elem
        }
    }
}

Solve problem 
End
