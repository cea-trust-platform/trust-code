# ESSAI CANAL JFM TURBULENT  #
# modele de turbulence: K-epsilon bas Reynolds    #
# PARALLEL OK #
# lance_test Arret TRUST en parallele #

dimension 2
Pb_hydraulique_Turbulent pb
Domaine dom

# BEGIN MESH #
Mailler dom
{

 	Pave  tube 
		{
 	        	origine             0.   0.    
  	                Nombre_de_noeuds    10   101
 	                Longueurs           10.  0.5  
 	                Facteurs            1.   1.
                }
                {
                        bord Entree     X = 0.      0. <= Y <= 0.5
                        bord Bas        Y = 0.      0. <= X <= 10.
                        bord Haut	Y = 0.5     0. <= X <= 10.
                        bord Sortie     X = 10.     0. <= Y <= 0.5
                }
}
# END MESH #

# BEGIN PARTITION
Partition dom
{
	Partitionneur tranche { tranches 2 1 }
	Larg_joint 1
	Nom_Zones DOM
}
End
END PARTITION #

# BEGIN SCATTER
Scatter DOM.Zones dom
END SCATTER #

VDF dis

Fluide_Incompressible air
Read air
           {
	mu Champ_Uniforme 1 0.0003572
	rho Champ_Uniforme 1 2
	   }

Schema_Euler_explicite sch
Read sch
        {
	 tinit        0.
	 tmax         400.
	 dt_min       1.e-5
	 dt_max       1.e-2
	 dt_impr      0.01
	 dt_sauv      1.
	 seuil_statio 1.e-5
	 facsec       1.
         nb_pas_dt_max 100
        }

Ecrire sch

Associate pb  dom
Associate pb  sch
Associate pb  air

Discretize pb dis

Read pb
       {
	Navier_Stokes_Turbulent {
   		solveur_pression GCP { precond ssor { omega 1.6 } seuil 1.e-10 } 
		       	convection                 { amont }
		       	diffusion                  { }
		       	sources                    {  }
		       	conditions_initiales       { vitesse Champ_Uniforme 2  1. 0. }                        
	               	boundary_conditions         {
			         Bas  	        paroi_fixe
			         Haut		Symetrie
			         Entree 	frontiere_ouverte_vitesse_imposee Champ_front_recyclage
				 		{ pb_champ_evaluateur pb vitesse 2 distance_plan 5. 0. }
			         Sortie 	frontiere_ouverte_pression_imposee  Champ_front_Uniforme 1 0.
			}
			Modele_Turbulence  K_epsilon_bas_Reynolds
			{
			  	Transport_K_epsilon_bas_Reynolds {
			     		Convection           { amont }
			     		Diffusion            { }
			     		sources              { source_transport_K_Eps_bas_Reynolds { C1_eps 1.44 C2_eps 1.92 } }
		                        boundary_conditions   {
			         		Bas  	  paroi_fixe
			         		Haut	  Symetrie
		                                Entree    frontiere_ouverte_K_eps_impose Champ_front_recyclage
						          { pb_champ_evaluateur pb k_eps 2 distance_plan 5. 0. }
		                                Sortie    frontiere_ouverte K_eps_ext Champ_Front_Uniforme 2 0. 0.
		                       	}                                                                                
 		                        Conditions_initiales { k_eps Champ_Uniforme 2 0.01178 0.005 }     
 		                }
 		                Modele_fonc_bas_Reynolds Launder_Sharma { }
				Turbulence_paroi negligeable
 		         }
	}
	Postraitement {
		        Sondes
	                       { 
				 sonde_vitFin   vitesse              periode  0.1  segment 50   10.  0.0025  10.  0.4975
				 sonde_vitDeb   vitesse              periode  0.1  segment 50   0.   0.0025  0.   0.4975
				 sonde_vitMil   vitesse              periode  0.1  segment 50   5.   0.0025  5.   0.4975
				 sonde_vitesse  vitesse 	     periode  0.1  points 1     9. 0.25

				 sonde_nutsortie   viscosite_turbulente periode  0.1  segment 50  10.  0.0025  10. 0.4975
				 sonde_nutentree   viscosite_turbulente periode  0.1  segment 50  0.   0.0025  0.  0.4975
			         sonde_nutMil      viscosite_turbulente periode  0.1  segment 50  5.   0.0025  5.  0.4975
				 sonde_nut         viscosite_turbulente periode  0.1  points 1  9. 0.25

				 sonde_ksortie     k                    periode  0.1  segment 50  10.  0.0025  10.  0.4975
				 sonde_kentree     k                    periode  0.1  segment 50  0.   0.0025  0.   0.4975
				 sonde_kMil  	   k                    periode  0.1  segment 50  5.   0.0025  5.   0.4975
				 sonde_k 	   k			periode  0.1  points 1  9. 0.25

				 sonde_epssortie   eps                  periode  0.1  segment 50  10.  0.0025  10.  0.4975
				 sonde_epsentree   eps                  periode  0.1  segment 50  0.   0.0025  0.   0.4975
				 sonde_epsMil      eps                  periode  0.1  segment 50  5.   0.0025  5.   0.4975
				 sonde_eps 	   eps			periode  0.1  points 1 9. 0.25
		               }
			Champs dt_post 10.
			{
				vitesse elem
				k elem
                       		viscosite_turbulente elem
			}
	}
}

Solve pb  
End
