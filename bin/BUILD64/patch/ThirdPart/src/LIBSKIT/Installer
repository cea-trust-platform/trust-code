#!/bin/bash
# Script d'installation
###################
# Install de SPARSKIT2
###################
MAKE=$1
rm -r -f SPARSKIT2
echo "Installation de SPARSKIT2 pour architecture $TRUST_ARCH"
# gunzip a la volee
gunzip -f -c $TRUST_ROOT/externalpackages/SKIT/SPARSKIT2.tar.gz | tar -xf -
# Correction du fichier inout.f pour eviter les warnings
cp patch/inout.f SPARSKIT2/INOUT/inout.f && echo SPARSKIT2/INOUT/inout.f patche
# modification du makefile pour les options de compile
cp patch/makefile SPARSKIT2/makefile && echo SPARSKIT2/makefile modifie
cp  patch/color.f ./SPARSKIT2/ORDERINGS/color.f   && echo SPARSKIT2/color.f modifie


# recuperation d'une modif de parms sur csort
# a priori integre donc on ne le fait plus
#cp patch/unary.f SPARSKIT2/FORMATS/unary.f&& echo SPARSKIT2/FORMATS/unary.f patche


cd SPARSKIT2
$TRUST_MAKE || exit -1
cd ..
rm -r -f SPARSKIT2
exit
